<!-- src/app/pages/results/results.page.html -->
<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Résultats du Quiz</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-card>
    <ion-card-header>
      <ion-card-title>Quiz terminé!</ion-card-title>
      <ion-card-subtitle>{{ category }} - {{ difficulty }}</ion-card-subtitle>
    </ion-card-header>
    <ion-card-content>
      <div class="score-container">
        <ion-text color="primary">
          <h1>{{ score }} / {{ totalQuestions }}</h1>
        </ion-text>
        <p>{{ getScorePercentage() }}%</p>
        <ion-progress-bar [value]="score / totalQuestions" [color]="getScoreColor()"></ion-progress-bar>
      </div>
    </ion-card-content>
  </ion-card>

  <ion-card>
    <ion-card-header>
      <ion-card-title>Récapitulatif</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item *ngFor="let answer of answers; let i = index" [color]="answer.correct ? 'success-transparent' : 'danger-transparent'">
          <ion-label>
            <h2>Question {{ i + 1 }}</h2>
            <p [innerHTML]="answer.question"></p>
            <ion-text color="medium">
              <p>Votre réponse: {{ answer.userAnswer }}</p>
            </ion-text>
            <ion-text *ngIf="!answer.correct" color="danger">
              <p>Réponse correcte: {{ answer.correctAnswer }}</p>
            </ion-text>
          </ion-label>
          <ion-icon slot="start" [name]="answer.correct ? 'checkmark-circle' : 'close-circle'"></ion-icon>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <div class="action-buttons">
    <ion-button expand="block" (click)="playAgain()">Rejouer</ion-button>
    <ion-button expand="block" color="secondary" (click)="goHome()">Accueil</ion-button>
  </div>
</ion-content>
